<html>
  <head>
    <meta charset="UTF-8" />
    <!--
      NOTE
      width=device-width
        This tells the browser to set the width of the viewport to the width of the device's screen.
        Without this, many older mobile browsers would render a "desktop-sized" (usually 980px wide) version of
        your page and then zoom out to fit it on the small screen, making text tiny and unreadable.
  
      initial-scale=1.0
        This sets the initial zoom level when the page is first loaded. 1.0 means there's no zoom,
        and the page is rendered at a 1:1 scale relative to the device's screen.
    -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CoreDNS Setup</title>
    <!-- For Google font "DM Sans" -->
    <link
      href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&&display=swap"
      rel="stylesheet"
    />
    <!-- For Prism code snippet -->
    <link rel="stylesheet" href="../../styles/prism-duotone-earth.css" />
    <script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-javascript.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-bash.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-yaml.min.js"></script>
    <script src="../../scripts/prism-custom-syntax-dns-zone.js"></script>
    <!-- Base style -->
    <link rel="stylesheet" href="../styles/blog-style.css" />
  </head>
  <body>
    <nav class="top-nav">
      <a class="home-link" href="../../index.html">&lt; Back to Home</a>
    </nav>
    <header>
      <h1 class="blog-post-title">CoreDNS Setup</h1>
      <div class="blog-post-metadata">
        <p class="publish-date">
            May 5, 2025
        </p>
        <div class="tags">
          <span class="tag"><img src=../images/tag-02.svg class="tag-icon">DNS</span>
          <span class="tag"><img src=../images/tag-02.svg class="tag-icon">CoreDNS</span>
          <span class="tag"><img src=../images/tag-02.svg class="tag-icon">Setup</span>
          <span class="tag"><img src=../images/tag-02.svg class="tag-icon">CNCF</span>
        </div>
      </div>
    </header>
    <nav class="toc">
      <h2 class="toc-title">Table of Contents</h2>
      <ul class="toc-list">
        <li class="toc-list-item"><a class="toc-list-item-link" href="#introduction">Introduction</a></li>
        <li class="toc-list-item"><a class="toc-list-item-link" href="#what-is-coredns?">What is CoreDNS?</a></li>
        <li class="toc-list-item"><a class="toc-list-item-link" href="#release-cycle">Release cycle</a></li>
        <li class="toc-list-item"><a class="toc-list-item-link" href="#installation">Installation</a></li>
          <ul class="sub-toc-list">
            <li class="toc-list-item"><a class="toc-list-item-link" href="#1.-docker-image">1. Docker Image</a></li>
            <li class="toc-list-item"><a class="toc-list-item-link" href="#2.-configuration-file">2. Configuration File</a></li>
            <li class="toc-list-item"><a class="toc-list-item-link" href="#3.-starting-coredns">3. Starting CoreDNS</a></li>
          </ul>
        <li class="toc-list-item"><a class="toc-list-item-link" href="#conclusion">Conclusion</a></li>
      </ul>
    </nav>
    <article>
      <h2 id="introduction" class="chapter-title">Introduction</h2>
      <p>This article walks you through how to set up CoreDNS.</p>
      <h2 id="what-is-coredns?" class="chapter-title">What is CoreDNS?</h2>
      <p>CoreDNS is a DNS server written in Go. It's licensed under the Apache License 2.0 and is a graduated project of the Cloud Native Computing Foundation.</p>
      <h2 id="release-cycle" class="chapter-title">Release cycle</h2>
      <p>You can check for new releases on the following pages:</p>
      <ul>
        <li><a href="https://coredns.io/tags/release/">Release</a></li>
        <li><a href="https://github.com/coredns/coredns/releases">GitHub Release</a></li>
      </ul>
      <h2 id="installation" class="chapter-title">Installation</h2>
      <h3 id="1.-docker-image" class="section-title">1. Docker Image</h3>
      <p>The Docker image is published on <a href="https://hub.docker.com/r/coredns/coredns">Docker Hub</a>.</p>
      <pre class="code-block"><code class="language-bash">$ docker pull coredns/coredns:latest
</code></pre>
      <h3 id="2.-configuration-file" class="section-title">2. Configuration File</h3>
      <p>The configuration file for CoreDNS is usually named <code class="inline-code-snippet">Corefile</code>.
The default location for the <code class="inline-code-snippet">Corefile</code> is the current working directory where CoreDNS is executed.
However, you can specify a different location with the <code class="inline-code-snippet">-conf</code> flag when starting CoreDNS.</p>
      <h4 id="example" class="sub-section-title">Example</h4>
      <p>If you want to serve DNS queries for the domain <code class="inline-code-snippet">example.com</code> using the zone file and forward other queries to <code class="inline-code-snippet">8.8.8.8</code> and <code class="inline-code-snippet">9.9.9.9</code>, you can create a <code class="inline-code-snippet">Corefile</code> like this:</p>
      <pre class="code-block"><code class="language-none">example.com {
  file /path/to/example.com.zone
  log
  errors
}
. {
  forward . 8.8.8.8 9.9.9.9
  log
  errors
}
</code></pre>
      <p>You can also create an <code class="inline-code-snippet">example.com.zone</code> file with the following content:</p>
      <pre class="code-block"><code class="language-dnszone">$TTL 3600
@ IN  SOA (
      ns.example.com.      ; MNAME
      admin.example.com.   ; RNAME
      2025050101           ; serial
      3600                 ; refresh
      1800                 ; retry
      604800               ; expire
      86400                ; minimum
)
@ IN  NS ns.example.com.
ns.example.com IN A 192.168.1.2
</code></pre>
      <p>In this example,</p>
      <ul>
        <li>We use the <code class="inline-code-snippet">file</code> plugin to load the zone file for <code class="inline-code-snippet">example.com</code>.</li>
        <li>We use the <code class="inline-code-snippet">forward</code> plugin to forward all DNS queries except those for the <code class="inline-code-snippet">example.com</code> zone to the specified upstream DNS servers.</li>
        <li>We also use the <code class="inline-code-snippet">log</code> and <code class="inline-code-snippet">errors</code> plugins to log the requests and errors to standard output.</li>
      </ul>
      <h3 id="3.-starting-coredns" class="section-title">3. Starting CoreDNS</h3>
      <p>To start CoreDNS with a specific configuration file, use the following command:</p>
      <pre class="code-block"><code class="language-bash">$ coredns -conf /path/to/Corefile
</code></pre>
      <p>If you want to run CoreDNS on Docker, you can use the following command:</p>
      <pre class="code-block"><code class="language-bash">$ docker run \
  --name coredns \
  -p 53:53/udp \
  -p 53:53 \
  -v /path/to/Corefile:/Corefile \
  coredns/coredns:latest
</code></pre>
      <h2 id="conclusion" class="chapter-title">Conclusion</h2>
      <p>In this article, we have covered the basics of CoreDNS setup. We discussed
what CoreDNS is, its release cycle, and how to install and configure it.
I hope this article provided a helpful starting point for using CoreDNS.</p>
    </article>
    <!-- Footer -->
    <footer>
      <p class="footer-text">&copy; 2025 um7a | All Rights Reserved</p>
    </footer>
  </body>
</html>
